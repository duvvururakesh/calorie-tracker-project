{% extends "base.html" %}
{% block content %}
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:wght@400;600;700&display=swap" rel="stylesheet">

<style>
  body {
    font-family: 'Inter Tight', sans-serif;
    background-color: #121212;
    color: #fff;
  }

  .card {
    background-color: #1E1E1E;
    border-radius: 1.25rem;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .card:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
  }

  .accent-green { color: #C7FF41; }
  .accent-blue { color: #5BEAFF; }
  .accent-purple { color: #A970FF; }

  .input-dark {
    background-color: #2A2A2A;
    border: none;
    color: #fff;
    border-radius: 0.75rem;
    padding: 0.75rem;
    width: 100%;
    transition: background 0.2s, box-shadow 0.2s;
  }
  .input-dark:focus {
    outline: none;
    background-color: #333;
    box-shadow: 0 0 0 2px #C7FF41;
  }

  .btn-primary {
    background-color: #C7FF41;
    color: #000;
    font-weight: 600;
    padding: 0.75rem 1rem;
    border-radius: 0.75rem;
    transition: all 0.2s ease;
    width: 100%;
  }
  .btn-primary:hover {
    background-color: #D6FF73;
  }

  .bottom-nav {
    background-color: #1E1E1E;
    border-top: 1px solid #2A2A2A;
    box-shadow: 0 -2px 6px rgba(0,0,0,0.4);
  }

  .nav-btn {
    padding: 0.75rem;
    text-align: center;
    font-weight: 600;
    transition: color 0.2s;
  }
  .nav-btn-active {
    color: #C7FF41;
  }
  .nav-btn-inactive {
    color: #888;
  }
  .nav-btn-inactive:hover {
    color: #C7FF41;
  }

  label {
    color: #bbb;
    font-weight: 500;
  }

  h2 {
    color: #fff;
    font-weight: 700;
  }
</style>

<div class="w-full min-h-screen" 
     x-data="{ view: '{{ request.args.get('view', 'dashboard') }}', selectedDate: '{{ selected_date.strftime('%Y-%m-%d') }}' }">

  <main class="pb-24">
    <!-- DASHBOARD -->
    <div x-show="view === 'dashboard'">
      {% include 'dashboard.html' %}
    </div>

    <!-- LOG -->
    <div x-show="view === 'log'" style="display: none;">
      {% include 'log.log_entry.html' %}
    </div>

    <!-- GOALS -->
    <div x-show="view === 'goals'" style="display: none;">
      <div class="p-6 card">
        <h2 class="text-2xl font-bold mb-6 text-center accent-green">Goals</h2>
        <form action="{{ url_for('profile.settings') }}" method="POST">
          {{ goals_form.hidden_tag() }}
          <div class="space-y-5">
            {% for field in [goals_form.calorie_goal, goals_form.calories_burnt_goal, goals_form.protein_goal,
                            goals_form.carbs_goal, goals_form.fat_goal, goals_form.sugar_goal,
                            goals_form.water_goal, goals_form.step_goal, goals_form.sleep_goal] %}
            <div>
              {{ field.label(class="block text-sm font-medium mb-1 text-gray-400") }}
              {{ field(class="input-dark") }}
              {% if field.errors %}
                <ul class="text-red-500 text-xs mt-1">
                  {% for error in field.errors %}
                    <li>{{ error }}</li>
                  {% endfor %}
                </ul>
              {% endif %}
            </div>
            {% endfor %}
            <div class="pt-4">
              {{ goals_form.submit_goals(class="btn-primary") }}
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- SETTINGS -->
    <div x-show="view === 'settings'" style="display: none;">
      {% include 'settings.html' %}
    </div>
  </main>

  <!-- BOTTOM NAVIGATION -->
  <div class="fixed bottom-0 left-0 right-0 bottom-nav flex justify-around max-w-lg mx-auto">
    <button @click="view = 'dashboard'" 
            class="nav-btn" 
            :class="{ 'nav-btn-active': view === 'dashboard', 'nav-btn-inactive': view !== 'dashboard' }">
      Dashboard
    </button>
    <button @click="view = 'log'" 
            class="nav-btn"
            :class="{ 'nav-btn-active': view === 'log', 'nav-btn-inactive': view !== 'log' }">
      Log
    </button>
    <button @click="view = 'goals'" 
            class="nav-btn"
            :class="{ 'nav-btn-active': view === 'goals', 'nav-btn-inactive': view !== 'goals' }">
      Goals
    </button>
  </div>
</div>
{% endblock %}
