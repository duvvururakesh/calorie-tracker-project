{% extends "base.html" %}
{% block content %}
<div class="p-6">
    <div class="flex items-center mb-6">
        <a href="{{ url_for('dashboard', selected_date_str=selected_date.strftime('%Y-%m-%d')) }}" class="mr-4">&lt; Back</a>
        <h1 class="text-2xl font-bold">Add Entry for {{ selected_date.strftime('%b %d') }}</h1>
    </div>

    <div class="space-y-6">
        <div class="bg-dark p-4 rounded-xl">
            <h2 class="text-xl font-bold mb-4">Log Food</h2>
            <form method="POST" class="space-y-4">
                {{ food_form.hidden_tag() }}
                {{ food_form.food_name(class="w-full p-3 bg-gray-800 border border-dark rounded-lg", placeholder="Food Name") }}
                {{ food_form.food_time(class="w-full p-3 bg-gray-800 border border-dark rounded-lg") }}
                <div class="grid grid-cols-2 gap-4">
                    {{ food_form.calories(class="w-full p-3 bg-gray-800 border border-dark rounded-lg", placeholder="Calories") }}
                    {{ food_form.protein(class="w-full p-3 bg-gray-800 border border-dark rounded-lg", placeholder="Protein (g)") }}
                </div>
                <div class="grid grid-cols-2 gap-4">
                    {{ food_form.carbs(class="w-full p-3 bg-gray-800 border border-dark rounded-lg", placeholder="Carbs (g)") }}
                    {{ food_form.fat(class="w-full p-3 bg-gray-800 border border-dark rounded-lg", placeholder="Fat (g)") }}
                </div>
                <div class="grid grid-cols-1">
                     {{ food_form.sugar(class="w-full p-3 bg-gray-800 border border-dark rounded-lg", placeholder="Sugar (g)") }}
                </div>
                {{ food_form.submit_food(class="w-full py-3 px-4 rounded-lg text-white font-semibold bg-green-500") }}
            </form>
        </div>

        <div class="bg-dark p-4 rounded-xl">
            <h2 class="text-xl font-bold mb-4">Log Water</h2>
            <form method="POST" class="space-y-4">
                {{ water_form.hidden_tag() }}
                {{ water_form.water_amount(class="w-full p-3 bg-gray-800 border border-dark rounded-lg", placeholder="Amount in ml") }}
                {{ water_form.submit_water(class="w-full py-3 px-4 rounded-lg text-white font-semibold bg-green-500") }}
            </form>
        </div>

        <div class="bg-dark p-4 rounded-xl">
            <h2 class="text-xl font-bold mb-4">Log Weight</h2>
            <form method="POST" class="space-y-4">
                {{ weight_form.hidden_tag() }}
                {{ weight_form.weight_amount(class="w-full p-3 bg-gray-800 border border-dark rounded-lg", placeholder="Weight in kg") }}
                {{ weight_form.submit_weight(class="w-full py-3 px-4 rounded-lg text-white font-semibold bg-green-500") }}
            </form>
        </div>

        <div class="bg-dark p-4 rounded-xl">
            <h2 class="text-xl font-bold mb-4">Log Steps</h2>
            <form method="POST" class="space-y-4">
                {{ step_form.hidden_tag() }}
                {{ step_form.step_amount(class="w-full p-3 bg-gray-800 border border-dark rounded-lg", placeholder="Number of steps") }}
                {{ step_form.submit_steps(class="w-full py-3 px-4 rounded-lg text-white font-semibold bg-green-500") }}
            </form>
        </div>

        <div class="bg-dark p-4 rounded-xl">
            <h2 class="text-xl font-bold mb-4">Log Sleep</h2>
            <form method="POST" class="space-y-4">
                {{ sleep_form.hidden_tag() }}
                {{ sleep_form.duration_hours(class="w-full p-3 bg-gray-800 border border-dark rounded-lg", placeholder="Duration in hours") }}
                {{ sleep_form.submit_sleep(class="w-full py-3 px-4 rounded-lg text-white font-semibold bg-green-500") }}
            </form>
        </div>
    </div>

    <div class="bg-dark p-6 rounded-xl mt-6">
        <h2 class="text-xl font-bold mb-4">Logged Food Today</h2>
        <ul class="space-y-2">
            {% for entry in food_entries %}
            <li class="flex justify-between items-center">
                <span>{{ entry.name }} ({{ entry.time.strftime('%H:%M') if entry.time else '' }})</span>
                <div class="flex items-center space-x-2">
                    <span>{{ entry.calories|int }} kcal</span>
                    <form action="{{ url_for('delete_entry', entry_type='food', entry_id=entry.id) }}" method="POST">
                        <button type="submit" class="text-red-500 text-xs">X</button>
                    </form>
                </div>
            </li>
            {% else %}
            <li>No food logged for this day yet.</li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}